@using System.Web.Mvc.Html
@using MrCMS.Helpers
@using MrCMS.Web.Apps.Amazon.Models
@model AmazonSyncModel
@{
    ViewBag.Title = "Sync Amazon Listing";
}
    <fieldset>
        <legend>
            Sync Amazon Listing #@Model.Title
            <span class="btn-group  display-inline  pull-right">
                @Html.ActionLink("Go to Listing", "Details", "Listing", new {id=Model.Id}, new { @class = "btn btn-primary"})
                @Html.ActionLink("Listings", "Index", "Listing", null, new { @class = "btn"})
                @Html.ActionLink("Logs", "Index", "Logs", new {type=AmazonLogType.Listings}, new { @class = "btn"})
            </span>
        </legend>
        
        @Html.Hidden("Id",Model.Id)
        @Html.Hidden("Description",Model.Description)
        @Html.Hidden("TaskId",Guid.NewGuid())
        
        <div id="pb" style="display: none">
            <div class="progress progress-info progress-striped">
                <div class="bar" style="width: 0;"></div>
            </div>
        </div>

        <div class="row-fluid">
            <div class="span6">
                <button type="button" class="btn btn-success" id="pb-start-task">
                    Sync Now</button>
            </div>
            <div class="span6">
                <div id="pb-status" style="display: none">
                    @{Html.RenderAction("ProgressBarMessages","App",new {id=Model.TaskId}); }
                </div>
            </div>
        </div>
       
    </fieldset>

@{ Html.IncludeScript("~/Apps/Amazon/Areas/Admin/Content/Scripts/custom/progress-bar-paged.js");}
@{ Html.IncludeScript("~/Apps/Amazon/Areas/Admin/Content/Scripts/custom/listings.js");}

@{ Html.IncludeCss("~/Apps/Amazon/Areas/Admin/Content/Styles/progress-bar.css"); }