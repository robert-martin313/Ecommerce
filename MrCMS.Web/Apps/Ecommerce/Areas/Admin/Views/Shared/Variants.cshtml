@model MrCMS.Web.Apps.Ecommerce.Pages.Product
<div class="tab-pane" id="variants">
    <div class="btn-group">
        <a href="@Url.Action("Add", "ProductVariant", new { id = Model.Id })" class="btn btn-success" data-toggle="fb-modal">Add Variant</a>
    </div>
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>SKU
                </th>
                @foreach (var option in Model.Options)
                {
                    <th>@option.Name
                    </th>
                }
                <th>Price
                </th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var variant in Model.Variants)
            {
                <tr>
                    <td>
                        @variant.SKU
                    </td>
                    @foreach (var option in Model.Options)
                    {
                        <td>
                            @{
                                var productAttributeValue = variant.OptionValues.FirstOrDefault(value => value.ProductOption.Name == option.Name);
                            }
                            @if (productAttributeValue != null)
                            {
                                @productAttributeValue.Value
                            }

                        </td>
                    }
                    <td>
                        @variant.Price
                    </td>
                    <td>
                        <div class="btn-group">
                            @Html.ActionLink("Edit", "Edit", "ProductVariant", new {id = variant.Id}, new {@class = "btn btn-mini", data_toggle = "fb-modal"})
                            @Html.ActionLink("Delete", "Delete", "ProductVariant", new {id = variant.Id}, new {@class = "btn btn-mini btn-danger", data_toggle = "fb-modal"})
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
