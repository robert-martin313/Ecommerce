@model MrCMS.Web.Apps.Ecommerce.Widgets.FeaturedProductsViewModel
@if (Model != null)
{
    <hr />
    if (!String.IsNullOrEmpty(Model.Title))
    {
    <h4>@Model.Title</h4>
    }
    <div class="row-fluid">
    @foreach (var item in Model.Products)
    {
            <div class="span3">
                <div style="height:200px; overflow:hidden;" >
                @if(item.Images.Any())
                {
                    <img src="@(item.Images.First().FileUrl)" class="img-rounded pull-left span12" alt="@item.Name" />
                }
                </div>
                    <div class="clearfix"></div>
                <h4 class="product-title"><a href="/@item.LiveUrlSegment">@item.Name</a></h4>
                <div style="height:130px;">@(item.Abstract.Length>255?item.Abstract.Substring(0,250)+"...":item.Abstract)</div>
                    <h1 class="product-price">
                    @if (item.PricePreTax == 0 && item.Variants.Any())
                    {
                        @Html.Raw("&pound;"+item.Variants.OrderBy(x=>x.Price).First().Price.ToString("#.##"))
                    }
                    else
                    {
                        @Html.Raw("&pound;"+item.Price.ToString("#.##"));
                    }
                </h1>
                <span>shop price &pound;@(item.PreviousPrice.HasValue?item.PreviousPrice.Value.ToString("#.##"):String.Empty)</span>

           </div>
    }
    </div>
}