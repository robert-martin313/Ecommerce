@using System.Linq
@using MrCMS.Web.Apps.Ecommerce.Models
@model CartModel
<div class="row margin-bottom-10">
    <div class="col-xs-4 line-height-30">
        @(Resource(Model.Discounts.Count == 1 ? "Discount" : "Discounts"))
    </div>
    <div class="col-xs-8">
        <ul class="list-unstyled margin-bottom-0">
            @foreach (var discountInfo in Model.Discounts)
            {
                var discount = discountInfo.Discount;
                var messages = discountInfo.Messages;
                <li class="line-height-30">
                    @discount.Name
                    @if (discountInfo.Status == DiscountStatus.ExplicitAndInvalid)
                    {
                        <span class="error">@Resource("Invalid for current basket")</span>
                    }
                    @if (discountInfo.Status == DiscountStatus.ValidButNotApplied)
                    {
                        <span class="error">@Resource("Unable to be applied to current basket")</span>
                    }
                    @if (messages.Any())
                    {
                        <ul>

                            @foreach (var message in messages)
                            {
                                <li>@message</li>
                            }
                        </ul>
                    }

                    @if (discount.RequiresCode)
                    {
                        <span>(<a data-remove-discount-code="@Url.Action("Remove", "Discount", new {discountCode = discount.Code})" href="#">Remove</a>)</span>
                    }
                </li>
            }
        </ul>

    </div>
</div>