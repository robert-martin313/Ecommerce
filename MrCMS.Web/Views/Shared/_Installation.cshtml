<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Mr CMS installation</title>
    <link href="/Content/install/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/Content/install/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Install/style.css")" type="text/css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <div class="row-fluid">
            <div class="span2">
                <img src="/Content/install/images/mr-cms-thumb.jpg" class="margin-top-10" title="Mr CMS Logo" /></div>
            <div class="span10"><h1 class="margin-top-10">Installation</h1><p>To complete this wizard you must know some information regarding your database server
                                                                               ("connection string"). Please contact your ISP if necessary. If you're installing
                                                                               on a local machine or server you might need information from your System Admin.</p></div>
        </div>
        <br />
        @RenderBody()

        <footer>
            All rights reserved
        </footer>


        <div id="throbber">
            <div class="curtain">
            </div>
            <div class="curtain-content">
                <div>
                    <h1 id="setUpHeader">Installing Mr CMS...</h1>
                    <p>
                        <img src="@Url.Content("~/content/install/images/install-synchronizing.gif")" alt="" />
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="@Url.Content("~/Content/install/scripts/jquery.validate.js")" type="text/javascript"> </script>
    <script src="@Url.Content("~/Content/install/scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"> </script>
    
    <script type="text/javascript">
        $(document).ready(function () {
           
        });

        $(document).ready(function () {
            $('input:radio[name=DatabaseType]').click(toggleProvider);
            $('input:radio[name=SqlConnectionInfo]').click(toggleSqlConnectionInfo);
            $('input:radio[name=SqlAuthenticationType]').click(toggleSqlAuthenticationType);

            toggleProvider();
            toggleSqlConnectionInfo();
            toggleSqlAuthenticationType();
        });


        function toggleProvider() {
            var selectedProvider = $("input[name=DatabaseType]:checked").attr('id');
            if (selectedProvider == 'provider_sqlite') {
                $('#sqlConnectionInfo').hide();
            } else {
                $('#sqlConnectionInfo').show();
            }
        }

        function toggleSqlConnectionInfo() {
            var selectedProvider = $("input[name=SqlConnectionInfo]:checked").attr('id');
            if (selectedProvider == 'sqlconnectioninfo_values') {
                $('#sqlDatabaseInfo').show();
                $('#sqlDatabaseConnectionString').hide();
            } else if (selectedProvider == 'sqlconnectioninfo_raw') {
                $('#sqlDatabaseInfo').hide();
                $('#sqlDatabaseConnectionString').show();
            }
        }

        function toggleSqlAuthenticationType() {
            var selectedProvider = $("input[name=SqlAuthenticationType]:checked").attr('id');
            if (selectedProvider == 'sqlauthenticationtype_sql') {
                $('#pnlSqlServerUsername').show();
                $('#pnlSqlServerPassword').show();
            } else if (selectedProvider == 'sqlauthenticationtype_windows') {
                $('#pnlSqlServerUsername').hide();
                $('#pnlSqlServerPassword').hide();
            }
        }


        (function () {

            function show() {
                window.setTimeout(function () {
                    document.getElementById("throbber").style.display = "block";
                }, 1000);
            }

            if (document.addEventListener) {
                document.addEventListener("submit", show, false);
            } else {
                document.forms[0].attachEvent("onsubmit", show);
            }
        })();

    </script>
</body>
</html>
