@using MrCMS.Helpers
@model MrCMS.Web.Apps.Ecommerce.Models.CartModel

<div class="row-fluid" id="cart-items">
    <div class="span8">
        <h4>Items</h4>
        @if(Model.Items.Any())
        {
            <table class="table table-striped">
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price </th>
                    <th></th>
                </tr>
                @foreach (var item in Model.Items)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td><input type="text" class="input-small" name="@Html.Raw("quantity-"+item.Id)" value="@item.Quantity"/></td>
                        <td>&pound;@item.Price.ToString("#.##")</td>
                        <td>
                            <div class="btn-group">
                                <button type="button" class="btn btn-mini" id="@Html.Raw("quantity-"+item.Id)" data-cart-id="@item.Id">Update</button>
                                @Html.ActionLink("Delete", "DeleteCartItem", "Cart", new { id = item.Id }, new { @class = "btn btn-mini btn-danger", data_toggle = "fb-modal" })
                            </div>
                        </td>
                    </tr> 
                }
            </table>
        }
        else
        {
            <span>You haven't added any items.</span>
        }
    </div>
    <div class="span4">
        @if(Model.Items.Any())
        {
            <h4>Your Order</h4>
            <br />
            <div>
                <div class="span6">Order</div>
                <div>&pound;@Model.TotalPreShipping.ToString("#.##")
                </div>
            </div>
            <div class="clearfix"></div>
            <div>
                <div class="span6">Shipping</div>
                <div>
                    @Html.Raw(Model.ShippingTotal.HasValue?"&pound;"+Model.ShippingTotal.Value.ToString("#.##"):"Will be calculated on the checkout.<br/><br/>")
                </div>
   
            </div>
            <div class="clearfix"></div>
            <div>
                <div class="span6">Total</div>
                <div>&pound;@Model.Total.ToString("#.##")</div>
            </div>
        }
    
        @{Html.RenderAction("DiscountCode", "Cart");}
    </div>
</div>
@{ Html.IncludeScript("~/Themes/Ecommerce/Apps/Ecommerce/Content/Scripts/custom/cart.js"); }