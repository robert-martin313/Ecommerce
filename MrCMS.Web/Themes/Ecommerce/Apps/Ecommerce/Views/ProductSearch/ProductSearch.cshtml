@model MrCMS.Web.Apps.Ecommerce.Pages.ProductSearch
@using MrCMS.Helpers

<ul class="breadcrumb">
<li><a href="#">Home</a> <span class="divider">/</span></li>
<li class="active">Products</li>
</ul>
@RenderZone("Before Content")
@Html.HiddenFor(x=>x.Id)
@Html.HiddenFor(x=>x.LiveUrlSegment)
@Html.HiddenFor(x=>x.UrlSegment)
<div class="row-fluid">
    <div class="span3">
        <div class="product-filter-box-title">
            Filter by Category
        </div>
        <div class="row-fluid">
          <ul class="nav nav-tabs nav-stacked ">
                @foreach (var item in (List<MrCMS.Web.Apps.Ecommerce.Pages.Category>)ViewBag.Categories)
                {
                     <li>
                        <a href="/@item.LiveUrlSegment">@item.Name <i class="icon-chevron-right pull-right"></i></a>
                    </li>
                }
          </ul>
        </div>
        <br />
        <div class="product-filter-box-title">
            Filter by Price
        </div>
        <div class="row-fluid">
            @Html.Hidden("product-price-range-min",(Int32)ViewBag.ProductPriceRangeMin)
            @Html.Hidden("product-price-range-max",(Int32)ViewBag.ProductPriceRangeMax)
            Price range from &pound;<span id="product-price-range-min-value">@ViewBag.ProductPriceRangeMin</span> - &pound;<span id="product-price-range-max-value">@ViewBag.ProductPriceRangeMax</span>
          <div id="slider-range" class="product-filter-box-slider"></div>
        </div>
        <br />
        <div class="product-filter-box-title">
            Filter by Options
        </div>
        <div class="row-fluid">
            <ul id="product-filter-box-options" class="nav nav-tabs nav-stacked ">
           @foreach (var option in (List<MrCMS.Web.Apps.Ecommerce.Entities.Products.ProductAttributeOption>)ViewBag.ProductOptions)
           {
               if (option.Values.Select(x => x.Value).Distinct().Any())
               {
                <li>
                        @option.Name
                        <br/>
                        <select id="@(Html.Encode("product-option-values-"+option.Name))" class="span12">
                         <option value="0">All</option>
                        @foreach (var optionValue in option.Values.Select(x=>x.Value).Distinct())
                        {
                                <option value="@Html.Encode(option.Name+optionValue)">@optionValue</option>
                        }
                        </select>
                </li>
                } 
           }
           </ul>
           </div>
         <br />
        <div class="product-filter-box-title">
            Filter by Specifications
        </div>
        <div class="row-fluid">
            <ul id="product-filter-box-specifications" class="nav nav-tabs nav-stacked ">
           @foreach (var specification in (List<MrCMS.Web.Apps.Ecommerce.Entities.Products.ProductSpecificationAttribute>)ViewBag.ProductSpecifications)
           {
               if(specification.Values.Select(x=>x.Value).Distinct().Any())
               {
               <li>
                        @specification.Name
                        <br/>
                        <select id="@(Html.Encode("product-specification-values-"+specification.Name))" class="span12">
                         <option value="0">All</option>
                        @foreach (var specificationValue in specification.Values.Select(x=>x.Value).Distinct())
                        {
                                <option value="@(specification.Name+":"+specificationValue)">@specificationValue</option>
                        }
                        </select>
                </li>
              }
           }
           </ul>
           </div>
    </div>
    <div class="span9">
            <div id="products-operations">
    <div id="stats" class="pull-left"></div>
    <div id="show" class="pull-right">
        <label>Show</label>
            <select class="pull-right" id="options">
                @foreach (var item in MrCMS.Website.MrCMSApplication.Get<MrCMS.Web.Apps.Ecommerce.Settings.EcommerceSettings>().CategoryProductsPerPage.Split(','))
                {
                    <option value="@item">@item products per page</option>
                }
            </select>
    </div>
    <div id="sorting" class="pull-right">
        <label>Sort by</label>
            <select class="pull-right" id="product-sorting-options">
                <option value="1">Relevance</option>
                <option value="2">Name A-Z</option>
                <option value="3">Name Z-A</option>
                <option value="4">Price Highest-Lowest</option>
                <option value="5">Price Lowest-Highest</option>
            </select>
    </div>
        </div>
            @{Html.RenderAction("Results", "ProductSearch",new { searchTerm=ViewBag.SearchTerm});}
    </div>
</div>

@{ Html.IncludeScript("~/Themes/Ecommerce/Apps/Ecommerce/Content/Scripts/custom/product-search.js"); }